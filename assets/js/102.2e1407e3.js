(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{431:function(e,t,a){"use strict";a.r(t);var i=a(6),o=Object(i.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("If you have any questions or feedback about this release, feel free to "),a("a",{attrs:{href:"https://bocadilloproject.github.io/faq.html#getting-in-touch",target:"_blank",rel:"noopener noreferrer"}},[e._v("get in touch"),a("OutboundLink")],1),e._v("!")]),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#asgi3"}},[e._v("ASGI3")])]),a("li",[a("a",{attrs:{href:"#middleware"}},[e._v("Middleware")]),a("ul",[a("li",[a("a",{attrs:{href:"#asgi-middleware"}},[e._v("ASGI middleware")])]),a("li",[a("a",{attrs:{href:"#app-initialisation"}},[e._v("App initialisation")])])])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"asgi3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#asgi3","aria-hidden":"true"}},[e._v("#")]),e._v(" ASGI3")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://asgi.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ASGI"),a("OutboundLink")],1),e._v(", or Asynchronous Server Gateway Interface, is the protocol that enables communication between Bocadillo applications and asynchronous web servers such as "),a("a",{attrs:{href:"https://www.uvicorn.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("uvicorn"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("A few weeks ago, "),a("a",{attrs:{href:"https://www.encode.io/reports/february-2019/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ASGI version 3.0 was released"),a("OutboundLink")],1),e._v(", and support was incrementally added to uvicorn and Starlette. Although support for ASGI3 in Starlette is still in beta, we're confident enough that it should land in stable version soon without major changes.")]),e._v(" "),a("p",[e._v("As a result, "),a("strong",[e._v("Bocadillo applications implement ASGI3")]),e._v(" as of 0.15.0.")]),e._v(" "),a("p",[a("strong",[e._v("As a Bocadillo user, this change should not impact you")]),e._v(". This is because Bocadillo abstracts away the details of communicating with a web server. (The only exception to this is if you've been using ASGI middleware — see below.) You will only need to use uvicorn 0.6+ — it should upgrade automatically when running "),a("code",[e._v("pip install -U bocadillo")]),e._v(".")]),e._v(" "),a("p",[a("strong",[e._v("What's next?")]),e._v(" The async web ecosystem is slowly migrating from ASGI2 to ASGI3. As such, you may find some libraries you use aren't compatible yet with ASGI3. In that case, please stick to Bocadillo 0.14.x for now, or find an alternative solution.")]),e._v(" "),a("h2",{attrs:{id:"middleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware","aria-hidden":"true"}},[e._v("#")]),e._v(" Middleware")]),e._v(" "),a("p",[e._v("We brought a few small changes to how middleware works.")]),e._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[e._v("You shouldn't be impacted by these changes unless you wrote HTTP or ASGI middleware yourself.")])]),e._v(" "),a("h3",{attrs:{id:"asgi-middleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#asgi-middleware","aria-hidden":"true"}},[e._v("#")]),e._v(" ASGI middleware")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("ASGIMiddleware")]),e._v(" base class was removed entirely. We obviously still support ASGI middleware — via "),a("code",[e._v("app.add_asgi_middleware()")]),e._v(" for instance — but instead of relying on a base class, you must now implement the ASGI protocol yourself.")]),e._v(" "),a("p",[e._v("Please refer to "),a("a",{attrs:{href:"https://bocadilloproject.github.io/how-to/middleware.html#asgi-middleware",target:"_blank",rel:"noopener noreferrer"}},[e._v("Writing middleware"),a("OutboundLink")],1),e._v(" for details.")]),e._v(" "),a("h3",{attrs:{id:"app-initialisation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-initialisation","aria-hidden":"true"}},[e._v("#")]),e._v(" App initialisation")]),e._v(" "),a("p",[e._v("We used to encourage app initialisation via middleware by passing the "),a("code",[e._v("App")]),e._v(" instance to the middleware's constructor.")]),e._v(" "),a("p",[e._v("However, with the arrival of "),a("a",{attrs:{href:"https://bocadilloproject.github.io/guides/architecture/plugins.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("plugins"),a("OutboundLink")],1),e._v(" in 0.14, we now have a dedicated (and more scalable) way to perform application initialisation.")]),e._v(" "),a("p",[e._v("For this reason, the constructors of middleware classes aren't given the "),a("code",[e._v("App")]),e._v(" instance anymore.")]),e._v(" "),a("p",[e._v("If a middleware is associated to some kind of initialisation or configuration-related conditional logic, consider building a plugin on top of it.")])])},[],!1,null,null,null);t.default=o.exports}}]);