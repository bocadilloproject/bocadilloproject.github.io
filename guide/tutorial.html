<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tutorial | Bocadillo</title>
    <meta name="description" content="Fast, scalable and real-time capable web APIs for everyone: Bocadillo is a Python asynchronous web framework built with productivity and modularity in mind.">
    <link rel="stylesheet" href="/octicons.css">
  <link rel="shortcut icon" href="/favicon.ico?v=lk90Ny5lbz">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=lk90Ny5lbz">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=lk90Ny5lbz">
  <link rel="manifest" href="/site.webmanifest?v=lk90Ny5lbz">
  <meta name="theme-color" content="#ffe66b">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=lk90Ny5lbz">
  <link rel="mask-icon" href="/safari-pinned-tab.svg?v=lk90Ny5lbz" color="#91ba3f">
  <meta name="msapplication-TileColor" content="#ef9a4d">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="https://bocadilloproject.github.io">
  <meta name="twitter:title" content="Bocadillo">
  <meta name="twitter:site" content="@bocadillopy">
  <meta name="twitter:creator" content="Florimond Manca">
  <meta name="twitter:description" content="Fast, scalable and real-time capable web APIs for everyone: Bocadillo is a Python asynchronous web framework built with productivity and modularity in mind.">
  <meta name="twitter:image" content="https://bocadilloproject.github.io/logo.png">
  <meta name="google-site-verification" content="xbJzBKn7IuLWAUKvqHo1c3vMelw3eTRL0k3JcKjYB_k">
    
    <link rel="preload" href="/assets/css/0.styles.1610f5ec.css" as="style"><link rel="preload" href="/assets/js/app.ef5a74fe.js" as="script"><link rel="preload" href="/assets/js/2.741e5c13.js" as="script"><link rel="preload" href="/assets/js/22.60c6ec4e.js" as="script"><link rel="preload" href="/assets/js/87.88eaed47.js" as="script"><link rel="prefetch" href="/assets/js/1.28623c5a.js"><link rel="prefetch" href="/assets/js/10.9e1006c4.js"><link rel="prefetch" href="/assets/js/100.764c96c8.js"><link rel="prefetch" href="/assets/js/101.79200541.js"><link rel="prefetch" href="/assets/js/102.2e1407e3.js"><link rel="prefetch" href="/assets/js/103.7830dd4a.js"><link rel="prefetch" href="/assets/js/104.52455b7e.js"><link rel="prefetch" href="/assets/js/105.fa552a9f.js"><link rel="prefetch" href="/assets/js/106.81313cd4.js"><link rel="prefetch" href="/assets/js/11.bdeaccad.js"><link rel="prefetch" href="/assets/js/12.fea470ff.js"><link rel="prefetch" href="/assets/js/13.39d7df02.js"><link rel="prefetch" href="/assets/js/14.c9927eee.js"><link rel="prefetch" href="/assets/js/15.87e26629.js"><link rel="prefetch" href="/assets/js/16.6281a5f1.js"><link rel="prefetch" href="/assets/js/17.3dc8666b.js"><link rel="prefetch" href="/assets/js/18.b93d182a.js"><link rel="prefetch" href="/assets/js/19.8093f59d.js"><link rel="prefetch" href="/assets/js/20.f6778ebc.js"><link rel="prefetch" href="/assets/js/21.83002d33.js"><link rel="prefetch" href="/assets/js/23.fecdc752.js"><link rel="prefetch" href="/assets/js/24.6ab6ed9a.js"><link rel="prefetch" href="/assets/js/25.3476451e.js"><link rel="prefetch" href="/assets/js/26.be460c24.js"><link rel="prefetch" href="/assets/js/27.78500487.js"><link rel="prefetch" href="/assets/js/28.df3b3176.js"><link rel="prefetch" href="/assets/js/29.171eca5b.js"><link rel="prefetch" href="/assets/js/30.27a29de9.js"><link rel="prefetch" href="/assets/js/31.c1e5ed6c.js"><link rel="prefetch" href="/assets/js/32.43e6bd89.js"><link rel="prefetch" href="/assets/js/33.47234724.js"><link rel="prefetch" href="/assets/js/34.8f883d10.js"><link rel="prefetch" href="/assets/js/35.886bf2d6.js"><link rel="prefetch" href="/assets/js/36.d74a4b45.js"><link rel="prefetch" href="/assets/js/37.5f147823.js"><link rel="prefetch" href="/assets/js/38.6882e29b.js"><link rel="prefetch" href="/assets/js/39.b016911e.js"><link rel="prefetch" href="/assets/js/4.9e306066.js"><link rel="prefetch" href="/assets/js/40.2fc0e4ef.js"><link rel="prefetch" href="/assets/js/41.3f8233d4.js"><link rel="prefetch" href="/assets/js/42.bb51a16e.js"><link rel="prefetch" href="/assets/js/43.64c511ad.js"><link rel="prefetch" href="/assets/js/44.2fd79fd9.js"><link rel="prefetch" href="/assets/js/45.ef1889bb.js"><link rel="prefetch" href="/assets/js/46.faed4535.js"><link rel="prefetch" href="/assets/js/47.c5a1fd71.js"><link rel="prefetch" href="/assets/js/48.3f137c5f.js"><link rel="prefetch" href="/assets/js/49.107fe3f3.js"><link rel="prefetch" href="/assets/js/5.6d0d80f9.js"><link rel="prefetch" href="/assets/js/50.16babc94.js"><link rel="prefetch" href="/assets/js/51.a761ac95.js"><link rel="prefetch" href="/assets/js/52.b3da75d6.js"><link rel="prefetch" href="/assets/js/53.cb224ef5.js"><link rel="prefetch" href="/assets/js/54.5fd0de3b.js"><link rel="prefetch" href="/assets/js/55.c68c0838.js"><link rel="prefetch" href="/assets/js/56.b86c9cfc.js"><link rel="prefetch" href="/assets/js/57.9a875cd5.js"><link rel="prefetch" href="/assets/js/58.d25974a5.js"><link rel="prefetch" href="/assets/js/59.4229b9d5.js"><link rel="prefetch" href="/assets/js/6.9de27215.js"><link rel="prefetch" href="/assets/js/60.190f9994.js"><link rel="prefetch" href="/assets/js/61.a6787cb1.js"><link rel="prefetch" href="/assets/js/62.55269a82.js"><link rel="prefetch" href="/assets/js/63.d16c0a81.js"><link rel="prefetch" href="/assets/js/64.de71f4d5.js"><link rel="prefetch" href="/assets/js/65.ec533d3e.js"><link rel="prefetch" href="/assets/js/66.3ca3058a.js"><link rel="prefetch" href="/assets/js/67.8f39d473.js"><link rel="prefetch" href="/assets/js/68.5f1bfdf2.js"><link rel="prefetch" href="/assets/js/69.8a5ee484.js"><link rel="prefetch" href="/assets/js/7.baf0b149.js"><link rel="prefetch" href="/assets/js/70.cae2620c.js"><link rel="prefetch" href="/assets/js/71.88c976be.js"><link rel="prefetch" href="/assets/js/72.0608759c.js"><link rel="prefetch" href="/assets/js/73.30825c52.js"><link rel="prefetch" href="/assets/js/74.f3a4653a.js"><link rel="prefetch" href="/assets/js/75.f076bac4.js"><link rel="prefetch" href="/assets/js/76.b9cf5ea6.js"><link rel="prefetch" href="/assets/js/77.664fe172.js"><link rel="prefetch" href="/assets/js/78.bb705f3f.js"><link rel="prefetch" href="/assets/js/79.755a16c1.js"><link rel="prefetch" href="/assets/js/8.1430bdec.js"><link rel="prefetch" href="/assets/js/80.3b3c943c.js"><link rel="prefetch" href="/assets/js/81.8dfcf1f4.js"><link rel="prefetch" href="/assets/js/82.e0d8b8bf.js"><link rel="prefetch" href="/assets/js/83.8e788d4e.js"><link rel="prefetch" href="/assets/js/84.e62a4140.js"><link rel="prefetch" href="/assets/js/85.7de9077f.js"><link rel="prefetch" href="/assets/js/86.36b0b794.js"><link rel="prefetch" href="/assets/js/88.12e8bfee.js"><link rel="prefetch" href="/assets/js/89.79671657.js"><link rel="prefetch" href="/assets/js/9.fff42a24.js"><link rel="prefetch" href="/assets/js/90.7770f14c.js"><link rel="prefetch" href="/assets/js/91.34595596.js"><link rel="prefetch" href="/assets/js/92.d0e2a53f.js"><link rel="prefetch" href="/assets/js/93.0dd1d80f.js"><link rel="prefetch" href="/assets/js/94.224315b4.js"><link rel="prefetch" href="/assets/js/95.6a720b9e.js"><link rel="prefetch" href="/assets/js/96.f8e2cc61.js"><link rel="prefetch" href="/assets/js/97.6ace73bc.js"><link rel="prefetch" href="/assets/js/98.3851eb39.js"><link rel="prefetch" href="/assets/js/99.4f065790.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1610f5ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Bocadillo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/how-to/" class="nav-link">How-To</a></div><div class="nav-item"><a href="/discussions/" class="nav-link">Discussions</a></div><div class="nav-item"><a href="/api/" class="nav-link">Reference</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Ecosystem</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Tooling</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/bocadilloproject/bocadillo-cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bocadillo CLI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>Help</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/faq.html" class="nav-link">FAQ</a></li><li class="dropdown-subitem"><a href="/troubleshooting.html" class="nav-link">Troubleshooting</a></li></ul></li><li class="dropdown-item"><h4>News</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/bocadillopy" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/news/" class="nav-link">News</a></li><li class="dropdown-subitem"><a href="/mentions.html" class="nav-link">Mentions</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/bocadilloproject/bocadillo/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://pypi.org/project/bocadillo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PyPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://github.com/bocadilloproject" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Official repos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <a href="https://github.com/bocadilloproject/bocadillo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/how-to/" class="nav-link">How-To</a></div><div class="nav-item"><a href="/discussions/" class="nav-link">Discussions</a></div><div class="nav-item"><a href="/api/" class="nav-link">Reference</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Ecosystem</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Tooling</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/bocadilloproject/bocadillo-cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bocadillo CLI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>Help</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/faq.html" class="nav-link">FAQ</a></li><li class="dropdown-subitem"><a href="/troubleshooting.html" class="nav-link">Troubleshooting</a></li></ul></li><li class="dropdown-item"><h4>News</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/bocadillopy" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/news/" class="nav-link">News</a></li><li class="dropdown-subitem"><a href="/mentions.html" class="nav-link">Mentions</a></li></ul></li><li class="dropdown-item"><h4>Resources</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/bocadilloproject/bocadillo/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://pypi.org/project/bocadillo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PyPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://github.com/bocadilloproject" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Official repos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <a href="https://github.com/bocadilloproject/bocadillo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Getting started</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/guide/async.html" class="sidebar-link">Async crash course</a></li><li><a href="/guide/tutorial.html" class="active sidebar-link">Tutorial</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/tutorial.html#setting-up-the-project" class="sidebar-link">Setting up the project</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#serving-the-application" class="sidebar-link">Serving the application</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#writing-the-websocket-endpoint" class="sidebar-link">Writing the WebSocket endpoint</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#trying-out-the-websocket-endpoint" class="sidebar-link">Trying out the WebSocket endpoint</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#hello-diego" class="sidebar-link">Hello, Diego!</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#refactoring-the-chatbot-as-a-provider" class="sidebar-link">Refactoring the chatbot as a provider</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#keeping-track-of-clients" class="sidebar-link">Keeping track of clients</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#exposing-clients-count-via-a-rest-endpoint" class="sidebar-link">Exposing clients count via a REST endpoint</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#testing" class="sidebar-link">Testing</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#wrapping-up" class="sidebar-link">Wrapping up</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial.html#next-steps" class="sidebar-link">Next steps</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Essentials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Built-in features</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Real-Time Web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reusability &amp; Modularity</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tooling</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="content deprecation-warning" style="margin:1rem;margin-top:4.6rem;" data-v-b1b05e82><p data-v-b1b05e82><strong data-v-b1b05e82>Warning:</strong> Bocadillo is now <strong data-v-b1b05e82>UNMAINTAINED</strong>.
    Users are recommended to migrate to a supported alternative, such as
    <a href="https://www.starlette.io" target="_blank" rel="noreferrer" data-v-b1b05e82>Starlette</a>
    or
    <a href="https://fastapi.tiangolo.com" target="_blank" rel="noreferrer" data-v-b1b05e82>FastAPI</a>. Please see
    <a href="https://github.com/bocadilloproject/bocadillo/issues/334" target="_blank" rel="noreferrer" data-v-b1b05e82>#344</a>
    for more information.
  </p></div> <div class="theme-default-content content__default"><h1 id="tutorial"><a href="#tutorial" aria-hidden="true" class="header-anchor">#</a> Tutorial</h1> <p>You <a href="/guide/installation.html">installed Bocadillo</a> and <a href="/guide/async.html">got up to speed with async in Python</a>? Perfect! Let us take you on a guided tour on how to work with Bocadillo.</p> <p>In this step-by-step tutorial, we will build a <strong>chatbot server</strong> together.</p> <p>We'll go through many aspects of building apps with Bocadillo, including:</p> <ul><li>Generating a project using the <a href="https://github.com/bocadilloproject/bocadillo-cli" target="_blank" rel="noopener noreferrer">Bocadillo CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Using the built-in <strong>WebSocket</strong> support to handle multiple connections in real-time.</li> <li>Creating <strong>REST endpoints</strong> using routing and views.</li> <li>Using <strong>providers</strong> to inject reusable resources into views.</li> <li><strong>Testing</strong> an application using <a href="https://docs.pytest.org" target="_blank" rel="noopener noreferrer">pytest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ul> <p>We'll use the <a href="https://github.com/gunthercox/ChatterBot" target="_blank" rel="noopener noreferrer">ChatterBot<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library to build <strong>Diego</strong>, a friendly conversational agent. Don't worry, this won't require <em>any</em> background in data science nor chatbot technology!</p> <p>Sounds exciting? Let's dive in! 🙌</p> <h2 id="setting-up-the-project"><a href="#setting-up-the-project" aria-hidden="true" class="header-anchor">#</a> Setting up the project</h2> <p>First things first: let's set up our project.</p> <ol><li>Open up a terminal, and go to your favorite development directory. For example</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cd</span> ~/dev
</code></pre></div><ol start="2"><li>Install the <a href="https://github.com/bocadilloproject/bocadillo-cli" target="_blank" rel="noopener noreferrer">Bocadillo CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> globally:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>pip <span class="token function">install</span> bocadillo-cli
</code></pre></div><ol start="3"><li>Use the CLI to generate a new project called <code>chatbot</code>:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>bocadillo create chatbot
</code></pre></div><ol start="4"><li>Run <code>cd chatbot</code>, and you should have the following directory structure:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>$ tree
.
├── .gitignore
├── README.md
├── requirements.txt
└── chatbot
    ├── __init__.py
    ├── app.py
    ├── asgi.py
    ├── providerconf.py
    └── settings.py
</code></pre></div><ol start="4"><li>Edit <code>requirements.txt</code> to add Chatterbot there:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>bocadillo &gt;= 0.14
chatterbot
pytz  # Required by Chatterbot
</code></pre></div><ol start="5"><li>Install dependencies. We're just using pip and a virtualenv here, but you can use any other dependency management solution:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>python -m venv venv
<span class="token function">source</span> venv/bin/activate
pip <span class="token function">install</span> -r requirements.txt
</code></pre></div><h2 id="serving-the-application"><a href="#serving-the-application" aria-hidden="true" class="header-anchor">#</a> Serving the application</h2> <p>Once this is all done, let's try and serve the app before we go any further. Run the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>uvicorn chatbot.asgi:app
</code></pre></div><p>If you go to <a href="http://localhost:8000" target="_blank" rel="noopener noreferrer">http://localhost:8000<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and get a <code>404 Not Found</code> response, you're all good! Enter <code>Ctrl+C</code> in your terminal to stop the server.</p> <h2 id="writing-the-websocket-endpoint"><a href="#writing-the-websocket-endpoint" aria-hidden="true" class="header-anchor">#</a> Writing the WebSocket endpoint</h2> <p>We're now ready to get to the meat of it! The first thing we'll build is the WebSocket endpoint.</p> <p>If you're not familiar with WebSocket, don't worry — here's a 10-word summary: it allows a server and a client to exchange messages in a bidirectional way. It's good old sockets reinvented for the web.</p> <p>Due to their <strong>bidirectional nature</strong>, they're very suitable for the kind of application we're building here — some sort of <em>conversation</em> between a client and a server (i.e. our chatbot).</p> <p>If you're interested in learning more about WebSockets in Python, I strongly recommend this talk: <a href="https://www.youtube.com/watch?v=PjiXkJ6P9pQ" target="_blank" rel="noopener noreferrer">A beginner's guide to WebSockets<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Alright, so we're not going to plug the chatbot in just yet. Instead, let's make the server send back any message it receives — a behavior also known as an &quot;echo&quot; endpoint.</p> <p>Add the following at the end of <code>app.py</code>:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># chatbot/app.py</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

@app<span class="token punctuation">.</span>websocket_route<span class="token punctuation">(</span><span class="token string">&quot;/conversation&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">converse</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">for</span> message <span class="token keyword">in</span> ws<span class="token punctuation">:</span>
        <span class="token keyword">await</span> ws<span class="token punctuation">.</span>send<span class="token punctuation">(</span>message<span class="token punctuation">)</span>
</code></pre></div><p>A few minimal explanations here, for the curious:</p> <ul><li>This defines a WebSocket endpoint accessible at the <code>ws://localhost:8000/conversation</code> location.</li> <li>The <code>async for message in ws:</code> line iterates over messages received over the WebSocket.</li> <li>Lastly, <code>await ws.send(message)</code> sends the received <code>message</code> as-is back to the client.</li></ul> <h2 id="trying-out-the-websocket-endpoint"><a href="#trying-out-the-websocket-endpoint" aria-hidden="true" class="header-anchor">#</a> Trying out the WebSocket endpoint</h2> <p>How about we try this out by creating a WebSocket client? Fear not — we don't need to write any JavaScript. We'll stick to Python and use the <a href="https://websockets.readthedocs.io" target="_blank" rel="noopener noreferrer">websockets<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library, which comes installed with Bocadillo.</p> <p>Create a <code>client.py</code> file in the project root directory, and paste the following code there. It connects to the WebSocket endpoint and runs a simple REPL:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># client.py</span>
<span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> contextlib <span class="token keyword">import</span> suppress
<span class="token keyword">import</span> websockets


<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">client</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> websockets<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">as</span> websocket<span class="token punctuation">:</span>
        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            message <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;&gt; &quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">await</span> websocket<span class="token punctuation">.</span>send<span class="token punctuation">(</span>message<span class="token punctuation">)</span>
            response <span class="token operator">=</span> <span class="token keyword">await</span> websocket<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>


<span class="token keyword">with</span> suppress<span class="token punctuation">(</span>KeyboardInterrupt<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 3.7+. See asyncio docs for &lt;3.7 usage.</span>
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>client<span class="token punctuation">(</span><span class="token string">&quot;ws://localhost:8000/conversation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Serve the app again and, in a separate terminal, run <code>$ python client.py</code>. You should be greeted with a <code>&gt;</code> prompt. If so, start chattin'!</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; Hi!
Hi!
&gt; Is there anyone here?
Is there anyone here?
&gt;
</code></pre></div><p>Pretty cool, isn't it? 🤓</p> <p>Type <code>Ctrl+C</code> to exit the session and close the WebSocket connection.</p> <h2 id="hello-diego"><a href="#hello-diego" aria-hidden="true" class="header-anchor">#</a> Hello, Diego!</h2> <p>Now that we're able to make the server and a client communicate, how about we replace the echo implementation with an actual, intelligent and friendly chatbot?</p> <p>This is where <a href="https://github.com/gunthercox/ChatterBot" target="_blank" rel="noopener noreferrer">ChatterBot<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> comes in! We'll create a chatbot named <strong>Diego</strong>.</p> <p>Go ahead and create a <code>bot.py</code> file, and add Diego in there:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># chatbot/bot.py</span>
<span class="token keyword">from</span> chatterbot <span class="token keyword">import</span> ChatBot
<span class="token keyword">from</span> chatterbot<span class="token punctuation">.</span>trainers <span class="token keyword">import</span> ChatterBotCorpusTrainer

diego <span class="token operator">=</span> ChatBot<span class="token punctuation">(</span><span class="token string">&quot;Diego&quot;</span><span class="token punctuation">)</span>

trainer <span class="token operator">=</span> ChatterBotCorpusTrainer<span class="token punctuation">(</span>diego<span class="token punctuation">)</span>
trainer<span class="token punctuation">.</span>train<span class="token punctuation">(</span>
    <span class="token string">&quot;chatterbot.corpus.english.greetings&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;chatterbot.corpus.english.conversations&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><p>(ChatterBot's chatbots are quite dumb out of the box, so the code above trains Diego on an English corpus to make him a bit smarter.)</p> <p>At this point, you can try out the chatbot in a Python interpreter:</p> <div class="language-python extra-class"><pre class="language-python"><code>$ python
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> chatbot<span class="token punctuation">.</span>bot <span class="token keyword">import</span> diego  <span class="token comment"># Be patient — this may take a few seconds to load!</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> diego<span class="token punctuation">.</span>get_response<span class="token punctuation">(</span><span class="token string">&quot;Hi, there!&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Statement text<span class="token punctuation">:</span>There should be one<span class="token operator">-</span><span class="token operator">-</span> <span class="token keyword">and</span> preferably only one <span class="token operator">-</span><span class="token operator">-</span>obvious way to do it<span class="token punctuation">.</span><span class="token operator">&gt;</span>
</code></pre></div><p>(Hmm. Interesting response! 🐍)</p> <p>Let's now plug Diego into the WebSocket endpoint: each time we receive a new <code>message</code>, we'll give it to Diego and send his response back.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># chatbot/app.py</span>
<span class="token keyword">from</span> <span class="token punctuation">.</span>bot <span class="token keyword">import</span> diego

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

@app<span class="token punctuation">.</span>websocket_route<span class="token punctuation">(</span><span class="token string">&quot;/conversation&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">converse</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">for</span> message <span class="token keyword">in</span> ws<span class="token punctuation">:</span>
        response <span class="token operator">=</span> diego<span class="token punctuation">.</span>get_response<span class="token punctuation">(</span>message<span class="token punctuation">)</span>
        <span class="token keyword">await</span> ws<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>If you run the <a href="#trying-out-the-websocket-endpoint">server/client setup</a> from earlier, you can now see that Diego converses with us over the WebSocket!</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; Hi there!
I am a chat bot. I am the original chat bot. Did you know that I am incapable of error?
&gt; Where are you?
I am on the Internet.
&gt;
</code></pre></div><p>Looks like Diego is a jokester. 😉</p> <h2 id="refactoring-the-chatbot-as-a-provider"><a href="#refactoring-the-chatbot-as-a-provider" aria-hidden="true" class="header-anchor">#</a> Refactoring the chatbot as a provider</h2> <p>Clients are now able to chat with Diego over a WebSocket connection. That's great!</p> <p>However, there are a few non-functional issues with our current setup. If you think about it, Diego is a <strong>resource</strong> — ideally, it should only be made available to the WebSocket endpoint at the time of processing a connection request. Instead, we load it as soon as the <code>app</code> module gets imported. Plus, it is injected as a global dependency which makes the code hard to test and less readable.</p> <p>So, there must be a better way… and there is: <a href="/guide/providers.html">providers</a>. ✨</p> <p>Providers are quite unique to Bocadillo. They were inspired by <a href="https://docs.pytest.org/en/latest/fixture.html" target="_blank" rel="noopener noreferrer">pytest fixtures<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and offer an elegant, modular and flexible way to <strong>manage and inject resources into web views</strong>.</p> <p>Let's use them to fix the code, shall we?</p> <p>Open the <code>providerconf.py</code> module that was generated by the CLI, and add the following code:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># chatbot/providerconf.py</span>
<span class="token keyword">from</span> bocadillo <span class="token keyword">import</span> provider

@provider<span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">diego</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> <span class="token punctuation">.</span>bot <span class="token keyword">import</span> diego

    <span class="token keyword">return</span> diego
</code></pre></div><p>This code declares a <code>diego</code> provider which lazily loads the chatbot on app startup (hence <code>scope=&quot;app&quot;</code>).</p> <p>We can now <strong>inject</strong> Diego into the WebSocket view. All we have to do is declare it as a <strong>parameter</strong> to the view. Let's do just that by updating the <code>app.py</code> script, which is listed here in full:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># chatbot/app.py</span>
<span class="token keyword">from</span> bocadillo <span class="token keyword">import</span> App

app <span class="token operator">=</span> App<span class="token punctuation">(</span><span class="token punctuation">)</span>

@app<span class="token punctuation">.</span>websocket_route<span class="token punctuation">(</span><span class="token string">&quot;/conversation&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">converse</span><span class="token punctuation">(</span>ws<span class="token punctuation">,</span> diego<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># &lt;-- 👋, Diego!</span>
    <span class="token keyword">async</span> <span class="token keyword">for</span> message <span class="token keyword">in</span> ws<span class="token punctuation">:</span>
        response <span class="token operator">=</span> diego<span class="token punctuation">.</span>get_response<span class="token punctuation">(</span>message<span class="token punctuation">)</span>
        <span class="token keyword">await</span> ws<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>No imports required — Diego will <em>automagically</em> get injected in the WebSocket view when processing the WebSocket connection request. ✨</p> <p>Ready to try things out?</p> <ol><li>Run the server. You should see additional logs corresponding to Bocadillo setting up Diego on startup:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>$ uvicorn chatbot.asgi:app
INFO: Started server process [29843]
INFO: Waiting for application startup.
[nltk_data] Downloading package averaged_perceptron_tagger to
[nltk_data]     /Users/Florimond/nltk_data...
[nltk_data]   Package averaged_perceptron_tagger is already up-to-
[nltk_data]       date!
[nltk_data] Downloading package punkt to /Users/Florimond/nltk_data...
[nltk_data]   Package punkt is already up-to-date!
[nltk_data] Downloading package stopwords to
[nltk_data]     /Users/Florimond/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!
Training greetings.yml: [####################] 100%
Training conversations.yml: [####################] 100%
INFO: Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
</code></pre></div><ol start="2"><li>Run the <code>client.py</code> script again, and start chatting! You shouldn't see any difference from before. In particular, Diego responds just as fast.</li></ol> <div class="language- extra-class"><pre class="language-text"><code>&gt; Hello!
Hi
&gt; I would like to order a sandwich
Yes it is.
&gt;
</code></pre></div><p>There you go! Beautiful, modular and flexible <a href="https://en.wikipedia.org/wiki/Dependency_injection" target="_blank" rel="noopener noreferrer">dependency injection<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with Bocadillo providers.</p> <h2 id="keeping-track-of-clients"><a href="#keeping-track-of-clients" aria-hidden="true" class="header-anchor">#</a> Keeping track of clients</h2> <p>Let's go one step further. True, we have quite elegantly implemented conversation with a chatbot over WebSocket. Now, how about we keep track of how many clients are currently talking to the chatbot?</p> <p>If you were wondering, the answer is yes — we can implement this with providers too!</p> <ol><li>Add a <code>clients</code> provider to <code>providerconf.py</code>:</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># chatbot/providerconf.py</span>
<span class="token keyword">from</span> bocadillo <span class="token keyword">import</span> provider

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

@provider<span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">clients</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>Add another provider which returns a context manager that takes care of adding the <code>ws</code> connection to the set of clients. FYI, this is an example of a <a href="/guide/providers.html#factory-providers">factory provider</a>, but you don't really need to understand the whole code at this point.</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># chatbot/providerconf.py</span>
<span class="token keyword">from</span> contextlib <span class="token keyword">import</span> contextmanager
<span class="token keyword">from</span> bocadillo <span class="token keyword">import</span> provider

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

@provider
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">save_client</span><span class="token punctuation">(</span>clients<span class="token punctuation">)</span><span class="token punctuation">:</span>
    @contextmanager
    <span class="token keyword">def</span> <span class="token function">_save</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">:</span>
        clients<span class="token punctuation">.</span>add<span class="token punctuation">(</span>ws<span class="token punctuation">)</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">yield</span> ws
        <span class="token keyword">finally</span><span class="token punctuation">:</span>
            clients<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>ws<span class="token punctuation">)</span>

    <span class="token keyword">return</span> _save
</code></pre></div><ol start="3"><li>In the WebSocket view, use the new <code>save_client</code> provider to register the WebSocket client:</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># chatbot/app.py</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

@app<span class="token punctuation">.</span>websocket_route<span class="token punctuation">(</span><span class="token string">&quot;/conversation&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">converse</span><span class="token punctuation">(</span>ws<span class="token punctuation">,</span> diego<span class="token punctuation">,</span> save_client<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> save_client<span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">async</span> <span class="token keyword">for</span> message <span class="token keyword">in</span> ws<span class="token punctuation">:</span>
            response <span class="token operator">=</span> diego<span class="token punctuation">.</span>get_response<span class="token punctuation">(</span>message<span class="token punctuation">)</span>
            <span class="token keyword">await</span> ws<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>That's it! While the client is chatting with Diego, it will be present in the set of <code>clients</code>.</p> <p>How about we do something with this information?</p> <h2 id="exposing-clients-count-via-a-rest-endpoint"><a href="#exposing-clients-count-via-a-rest-endpoint" aria-hidden="true" class="header-anchor">#</a> Exposing clients count via a REST endpoint</h2> <p>As a final feature, let's step aside from WebSocket for a moment and go back to the good old HTTP protocol. We'll create a simple REST endpoint to view the number of currently connected clients.</p> <p>Go back to <code>app.py</code> and add the following code:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># chatbot/app.py</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">&quot;/client-count&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">client_count</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> clients<span class="token punctuation">)</span><span class="token punctuation">:</span>
    res<span class="token punctuation">.</span>json <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">:</span> <span class="token builtin">len</span><span class="token punctuation">(</span>clients<span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><p>Hopefully this code shouldn't come as a surprise. All we do here is send the number of <code>clients</code> (obtained from the <code>clients</code> provider) in a JSON response.</p> <p>Go ahead! Run <code>uvicorn chatbot.asgi:app</code>, and a few <code>python client.py</code> instances, and check out how many clients are connected by opening <a href="http://localhost:8000/client-count" target="_blank" rel="noopener noreferrer">http://localhost:8000/client-count<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in a web browser. Press <code>Ctrl+C</code> for one of the clients, and see the client count go down!</p> <p>Did it work? Congrats! ✨</p> <h2 id="testing"><a href="#testing" aria-hidden="true" class="header-anchor">#</a> Testing</h2> <p>We're mostly done in terms of the features we wanted to cover together. We have some ideas you can explore as exercises, of course, but before getting to that let's write some tests.</p> <p>One of Bocadillo's design principles is to make it easy to write high-quality applications. As such, Bocadillo has all the tools built-in to write tests for this chatbot server.</p> <p>You can write those with your favorite test framework. We'll choose <a href="https://docs.pytest.org" target="_blank" rel="noopener noreferrer">pytest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for the purpose of this tutorial. Let's install it first:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>pip <span class="token function">install</span> pytest
</code></pre></div><p>Next, create a tests package:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> tests
</code></pre></div><p>We can now setup our testing environment:</p> <ul><li>We'll write a <a href="https://docs.pytest.org/en/latest/fixture.html" target="_blank" rel="noopener noreferrer">pytest fixture<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that sets up a test client. The test client exposes a Requests-like API as well as helpers to test WebSocket endpoints.</li> <li>We don't actually need to test the chatbot here, so we'll override the <code>diego</code> provider with an &quot;echo&quot; mock — this will have the nice side effect of greatly speeding up the tests.</li></ul> <p>Go ahead and create a <code>conftest.py</code> script and place the following in there:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># tests/conftest.py</span>
<span class="token keyword">import</span> pytest
<span class="token keyword">from</span> bocadillo <span class="token keyword">import</span> provider<span class="token punctuation">,</span> create_client

<span class="token keyword">from</span> chatbot<span class="token punctuation">.</span>asgi <span class="token keyword">import</span> app

@provider
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">diego</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">EchoDiego</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">get_response</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> query<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> query

    <span class="token keyword">return</span> EchoDiego<span class="token punctuation">(</span><span class="token punctuation">)</span>

@pytest<span class="token punctuation">.</span>fixture
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> create_client<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre></div><p>Now is the time to write some tests! Create a <code>test_app.py</code> file in the tests package:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">touch</span> tests/test_app.py
</code></pre></div><p>First, let's test that we can connect to the WebSocket endpoint, and that we get a response from Diego if we send a message:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># tests/test_app.py</span>

<span class="token keyword">def</span> <span class="token function">test_connect_and_converse</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> client<span class="token punctuation">.</span>websocket_connect<span class="token punctuation">(</span><span class="token string">&quot;/conversation&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ws<span class="token punctuation">:</span>
        ws<span class="token punctuation">.</span>send_text<span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">assert</span> ws<span class="token punctuation">.</span>receive_text<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;Hello!&quot;</span>
</code></pre></div><p>Now, let's test the incrementation of the client counter when clients connect to the WebSocket endpoint:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># tests/test_app.py</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">def</span> <span class="token function">test_client_count</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">assert</span> client<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;/client-count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>

    <span class="token keyword">with</span> client<span class="token punctuation">.</span>websocket_connect<span class="token punctuation">(</span><span class="token string">&quot;/conversation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">assert</span> client<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;/client-count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>

    <span class="token keyword">assert</span> client<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;/client-count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>
</code></pre></div><p>Run these tests using:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>pytest
</code></pre></div><p>And, well, guess what?</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> <span class="token function">test</span> session starts <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
platform darwin -- Python 3.7.2, pytest-4.3.1, py-1.8.0, pluggy-0.9.0
rootdir: <span class="token punctuation">..</span>., inifile: pytest.ini
collected 2 items

test_app.py <span class="token punctuation">..</span>                                         <span class="token punctuation">[</span>100%<span class="token punctuation">]</span>

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> 2 passed <span class="token keyword">in</span> 0.08 seconds <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
</code></pre></div><p>Tests pass! ✅🎉</p> <h2 id="wrapping-up"><a href="#wrapping-up" aria-hidden="true" class="header-anchor">#</a> Wrapping up</h2> <p>If you've made it so far — congratulations! You've just built a <strong>chatbot server</strong> powered by WebSocket, <a href="https://github.com/gunthercox/ChatterBot" target="_blank" rel="noopener noreferrer">ChatterBot<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and Bocadillo.</p> <p>Together, we've seen how to:</p> <ul><li>Setup a project using the <a href="https://github.com/bocadilloproject/bocadillo-cli" target="_blank" rel="noopener noreferrer">Bocadillo CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and edit its contents.</li> <li>Write WebSocket and HTTP endpoints.</li> <li>Use providers to decouple resources from their consumers.</li> <li>Test WebSocket and HTTP endpoints using pytest and Bocadillo's testing helpers.</li></ul> <p>The complete code for this tutorial is available on the GitHub repo: <a href="https://github.com/bocadilloproject/bocadillo/blob/master/docs/getting-started/tutorial/" target="_blank" rel="noopener noreferrer">get the code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="next-steps"><a href="#next-steps" aria-hidden="true" class="header-anchor">#</a> Next steps</h2> <p>Obviously, we've only scratched the surface of what you can do with Bocadillo. The goal of this tutorial was to take you through the steps of building your First Meaningful Application.</p> <p>You can iterate upon this chatbot server we've built together very easily. We'd be happy to see what you come up with!</p> <p>Want to challenge yourself? Here are a few ideas:</p> <ul><li>Add a home page rendered with <a href="/guide/templates.html">templates</a>. The web browser should connect to the chatbot server via a JavaScript program. You'll probably also need to serve <a href="/guide/static-files.html">static files</a> to achieve this.</li> <li><a href="https://chatterbot.readthedocs.io/en/stable/training.html" target="_blank" rel="noopener noreferrer">Train Diego<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to answers questions like &quot;How many people are you talking to currently?&quot;</li> <li>Currently, all clients talk to the same instance of Diego. Yet, it would be nice if each client had their own Diego to ensure a bespoke conversation. You may want to investigate <a href="/guide/sessions.html">cookie-based sessions</a> and <a href="/guide/providers.html#factory-providers">factory providers</a> to implement this behavior.</li></ul> <p>You're now about the dive into the details of the framework. Have fun working with Bocadillo! 🥪</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bocadilloproject/bocadillo/edit/release/docs/docs/guide/tutorial.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/18/2019, 6:04:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guide/async.html" class="prev">
          Async crash course
        </a></span> <span class="next"><a href="/guide/apps.html">
          Applications
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ef5a74fe.js" defer></script><script src="/assets/js/2.741e5c13.js" defer></script><script src="/assets/js/22.60c6ec4e.js" defer></script><script src="/assets/js/87.88eaed47.js" defer></script>
  </body>
</html>
