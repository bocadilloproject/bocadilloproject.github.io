(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{439:function(t,e,a){"use strict";a.r(e);var r=a(6),s=Object(r.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"graphql-with-tartiflette"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#graphql-with-tartiflette","aria-hidden":"true"}},[t._v("#")]),t._v(" GraphQL with Tartiflette")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://graphql.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GraphQL"),a("OutboundLink")],1),t._v(" is an API query language, often presented as a complement to regular REST API endpoints. The GraphQL documentation reads:")]),t._v(" "),a("blockquote",[a("p",[t._v("GraphQL [...] gives clients the power to ask for exactly what they need and nothing more, makes it easier to evolve APIs over time, and enables powerful developer tools.")])]),t._v(" "),a("p",[t._v("If you want to add a GraphQL endpoint to Bocadillo, all you need is an async GraphQL engine that provides an ASGI adapter. Options include "),a("a",{attrs:{href:"https://github.com/mirumee/ariadne",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ariadne"),a("OutboundLink")],1),t._v(" and "),a("a",{attrs:{href:"https://tartiflette.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tartiflette"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("In this guide, we will be using:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://tartiflette.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tartiflette"),a("OutboundLink")],1),t._v(": a Python asynchronous GraphQL engine built on "),a("code",[t._v("libgraphqlparser")]),t._v(".")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/tartiflette/tartiflette-starlette",target:"_blank",rel:"noopener noreferrer"}},[t._v("tartiflette-starlette"),a("OutboundLink")],1),t._v(": an ASGI wrapper for Tartiflette featuring a built-in "),a("strong",[t._v("GraphiQL client")]),t._v(".")])]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("SEE ALSO")]),t._v(" "),a("ul",[a("li",[t._v("For an introduction to GraphQL, read the official "),a("a",{attrs:{href:"https://graphql.org/learn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Introduction to GraphQL"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("li",[t._v("For a complete example project using Tartiflette and "),a("code",[t._v("tartiflette-starlette")]),t._v(", including a React frontend using the React Apollo client, see the "),a("a",{attrs:{href:"https://github.com/bocadilloproject/react-example/tree/react-apollo",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-example"),a("OutboundLink")],1),t._v(" example project.")])])]),t._v(" "),a("h2",{attrs:{id:"project-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#project-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" Project setup")]),t._v(" "),a("p",[t._v("Setting up your project to serve a GraphQL API is as simple as mounting a "),a("code",[t._v("TartifletteApp")]),t._v(" as a "),a("router-link",{attrs:{to:"/guide/nested-apps.html"}},[t._v("nested app")]),t._v(":")],1),t._v(" "),a("ol",[a("li",[t._v("Install Tartiflette and "),a("code",[t._v("tartiflette-starlette")]),t._v(":")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" tartiflette tartiflette-starlette\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Create an ASGI "),a("code",[t._v("TartifletteApp")]),t._v(" out of your Tartiflette "),a("code",[t._v("engine")]),t._v(" or "),a("code",[t._v("sdl")]),t._v(" string (if these concepts sound unfamiliar, see the "),a("a",{attrs:{href:"https://tartiflette.io/docs/tutorial/getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tartiflette documentation"),a("OutboundLink")],1),t._v("):")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# myproject/graphql.py")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" tartiflette "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Engine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Resolver\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" tartiflette_starlette "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" TartifletteApp\n\n@Resolver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Query.hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, GraphQL!"')]),t._v("\n\nengine "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Engine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type Query { hello: String }"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ngraphql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" TartifletteApp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("engine"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("engine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("Mount it as a "),a("router-link",{attrs:{to:"/guide/nested-apps.html"}},[t._v("nested app")]),t._v(" and register the startup event handler:")],1)]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v("Â ")]),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v("Â ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# myproject/app.py")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bocadillo "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("graphql "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" graphql\n\napp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/graphql"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" graphql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"startup"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" graphql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("Serve the app, and make your first query!")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -H "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type: application/graphql"')]),t._v(" http://localhost:8000\n")])])]),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, GraphQL!"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ðŸš€")]),t._v(" "),a("h2",{attrs:{id:"interactive-graphiql-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#interactive-graphiql-client","aria-hidden":"true"}},[t._v("#")]),t._v(" Interactive GraphiQL client")]),t._v(" "),a("p",[t._v("The GraphiQL client can be enabled using the "),a("code",[t._v("graphiql")]),t._v(" option to "),a("code",[t._v("TartifletteApp")]),t._v(". We recommend using a "),a("router-link",{attrs:{to:"/guide/config.html#settings-module"}},[t._v("setting")]),t._v(" to provision this option:")],1),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# myproject/settings.py")]),t._v("\nGRAPHIQL "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Modify to your liking")]),t._v("\n")])])]),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# myproject/graphql.py")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" settings\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\ngraphql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" TartifletteApp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("engine"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("engine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" graphiql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("settings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GRAPHIQL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("It will be accessible on the same endpoint than the regular GraphQL API, e.g. "),a("code",[t._v("http://localhost:8000/graphql")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"building-the-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#building-the-api","aria-hidden":"true"}},[t._v("#")]),t._v(" Building the API")]),t._v(" "),a("p",[t._v("Once you've completed the above steps, you're in Tartiflette territory! Building the GraphQL API is simply a matter of writing queries, resolvers and mutations.")]),t._v(" "),a("p",[t._v("You can learn more about these concepts here:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://tartiflette.io/docs/tutorial/create-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("Queries"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tartiflette.io/docs/tutorial/write-your-resolvers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Resolvers"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tartiflette.io/docs/tutorial/write-your-mutation-resolvers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mutations"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("For more information on using "),a("code",[t._v("TartifletteApp")]),t._v(", see the "),a("a",{attrs:{href:"https://github.com/tartiflette/tartiflette-starlette",target:"_blank",rel:"noopener noreferrer"}},[t._v("tartiflette-starlette documentation"),a("OutboundLink")],1),t._v(".")])])},[],!1,null,null,null);e.default=s.exports}}]);