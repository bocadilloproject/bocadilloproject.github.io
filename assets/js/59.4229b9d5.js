(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{464:function(e,t,r){"use strict";r.r(t);var a=r(6),o=Object(a.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"deployment"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#deployment","aria-hidden":"true"}},[e._v("#")]),e._v(" Deployment")]),e._v(" "),r("p",[e._v("In production, we recommend you use a process manager to spin up multiple workers, increase throughput and increase resiliency in case any of the workers fails.")]),e._v(" "),r("h2",{attrs:{id:"running-with-gunicorn"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#running-with-gunicorn","aria-hidden":"true"}},[e._v("#")]),e._v(" Running with Gunicorn")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://gunicorn.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Gunicorn"),r("OutboundLink")],1),e._v(" is a very popular option to manage multiple application processes in production. Luckily, uvicorn includes a worker class which means you can run your Bocadillo apps on Gunicorn with very little configuration (details: "),r("a",{attrs:{href:"https://www.uvicorn.org/deployment/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Uvicorn Deployment"),r("OutboundLink")],1),e._v(").")]),e._v(" "),r("p",[e._v("The following will start a Gunicorn server for your application:")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("gunicorn -w 4 -k uvicorn.workers.UvicornWorker -b localhost:8000 app:app\n")])])]),r("p",[e._v("Let's break down this command:")]),e._v(" "),r("ol",[r("li",[r("code",[e._v("gunicorn")]),e._v(": this is the Gunicorn executable, which can be installed via "),r("code",[e._v("pip install gunicorn")])]),e._v(" "),r("li",[r("code",[e._v("-w 4")]),e._v(": Gunicorn will start and manage 4 application processes (a.k.a workers).")]),e._v(" "),r("li",[r("code",[e._v("-k uvicorn.workers.UvicornWorker")]),e._v(": here we pass Uvicorn's worker class")]),e._v(" "),r("li",[r("code",[e._v("-b localhost:8000")]),e._v(": specifies on which host and port the application should run.")]),e._v(" "),r("li",[r("code",[e._v("app:app")]),e._v(": identifies the Bocadillo application in the "),r("code",[e._v("path.to.module:object")]),e._v(" format.")])]),e._v(" "),r("h2",{attrs:{id:"running-with-docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#running-with-docker","aria-hidden":"true"}},[e._v("#")]),e._v(" Running with Docker")]),e._v(" "),r("p",[e._v("Bocadillo applications can easily be containerized to run in Docker containers. You can find an example "),r("code",[e._v("Dockerfile")]),e._v(" in the "),r("a",{attrs:{href:"https://github.com/bocadilloproject/docker-example",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-example"),r("OutboundLink")],1),e._v(" repo.")]),e._v(" "),r("h2",{attrs:{id:"what-about-static-files"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#what-about-static-files","aria-hidden":"true"}},[e._v("#")]),e._v(" What about static files?")]),e._v(" "),r("p",[e._v('A typical answer to, "How should I service static files for my Gunicorn-served web app" is that you should use a reverse proxy such as Nginx. Even though this and other options such as using a CDN or object storage are valid approaches, they\'re difficult to get started with and require extra sysadmin work.')]),e._v(" "),r("p",[e._v("Bocadillo keeps it simple by using "),r("a",{attrs:{href:"http://whitenoise.evans.io/en/stable/",target:"_blank",rel:"noopener noreferrer"}},[e._v("WhiteNoise"),r("OutboundLink")],1),e._v(", a library that allows your application to serve its own static files in a simple and "),r("a",{attrs:{href:"http://whitenoise.evans.io/en/stable/#infrequently-asked-questions",target:"_blank",rel:"noopener noreferrer"}},[e._v("performant enough"),r("OutboundLink")],1),e._v(" manner, making it self-contained â€” and ready to be deployed on managed platforms.")]),e._v(" "),r("p",[e._v("In practice, this means that "),r("strong",[e._v("you won't need any extra steps to serve static files in production")]),e._v(", unless you have very high performance requirements, in which case you should probably put your app behind a CDN.")]),e._v(" "),r("h2",{attrs:{id:"deployment-solutions"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#deployment-solutions","aria-hidden":"true"}},[e._v("#")]),e._v(" Deployment solutions")]),e._v(" "),r("h3",{attrs:{id:"heroku"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#heroku","aria-hidden":"true"}},[e._v("#")]),e._v(" Heroku")]),e._v(" "),r("p",[e._v("Bocadillo applications are very easy to deploy to Heroku. Check out the "),r("router-link",{attrs:{to:"/how-to/heroku.html"}},[e._v("Heroku deployment guide")]),e._v(" to get started!")],1)])},[],!1,null,null,null);t.default=o.exports}}]);