(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{443:function(t,e,s){"use strict";s.r(e);var a=s(6),r=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing","aria-hidden":"true"}},[t._v("#")]),t._v(" Testing")]),t._v(" "),s("p",[t._v("One of the design principles of Bocadillo is to make it easy to write high-quality applications. This includes helping you write great tests and ensure the quality of your apps.")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",[t._v("We wrote specific how-to guides on integrating Bocadillo with the following test frameworks:")]),t._v(" "),s("ul",[s("li",[s("router-link",{attrs:{to:"/how-to/test-pytest.html"}},[t._v("pytest")])],1)])]),t._v(" "),s("h2",{attrs:{id:"test-client"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#test-client","aria-hidden":"true"}},[t._v("#")]),t._v(" Test client")]),t._v(" "),s("p",[t._v("The "),s("router-link",{attrs:{to:"/api/testing.html#create-client"}},[s("code",[t._v("create_client")])]),t._v(" helper can be used to build a "),s("a",{attrs:{href:"https://www.starlette.io/testclient/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Starlette "),s("code",[t._v("TestClient")]),s("OutboundLink")],1),t._v(" out of an "),s("router-link",{attrs:{to:"/api/applications.html#App"}},[s("code",[t._v("App")])]),t._v(" instance. Additional arguments are passed to the "),s("code",[t._v("TestClient")]),t._v(" constructor.")],1),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bocadillo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" create_client\n\napp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nclient "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("The returned "),s("code",[t._v("TestClient")]),t._v(" exposes the same interface as the "),s("a",{attrs:{href:"http://docs.python-requests.org/en/master/",target:"_blank",rel:"noopener noreferrer"}},[t._v("requests"),s("OutboundLink")],1),t._v(" library, and has other useful features such as WebSocket testing helpers.")]),t._v(" "),s("p",[t._v("We recommend you read the documentation for Starlette's test client for further information.")]),t._v(" "),s("h2",{attrs:{id:"live-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#live-server","aria-hidden":"true"}},[t._v("#")]),t._v(" Live server")]),t._v(" "),s("p",[t._v("If you need to perform integration tests against a live server, the "),s("router-link",{attrs:{to:"/api/testing.html#liveserver"}},[s("code",[t._v("LiveServer")])]),t._v(" context manager should come handy. It starts a "),s("router-link",{attrs:{to:"/guide/apps.html#serving-an-application"}},[t._v("uvicorn server")]),t._v(" in a separate process, and terminates it when exiting the context. You can then make requests to it, e.g. using "),s("a",{attrs:{href:"http://docs.python-requests.org/en/master/",target:"_blank",rel:"noopener noreferrer"}},[t._v("requests"),s("OutboundLink")],1),t._v(":")],1),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bocadillo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" configure"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LiveServer\n\napp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconfigure"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" LiveServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" requests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"miscellaneous-utilities"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#miscellaneous-utilities","aria-hidden":"true"}},[t._v("#")]),t._v(" Miscellaneous utilities")]),t._v(" "),s("h3",{attrs:{id:"overriding-environment-variables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#overriding-environment-variables","aria-hidden":"true"}},[t._v("#")]),t._v(" Overriding environment variables")]),t._v(" "),s("p",[t._v("If you need to override some environment variables during your tests, you may find the "),s("router-link",{attrs:{to:"/api/utils.html#override-env"}},[s("code",[t._v("override_env")])]),t._v(" helper useful:")],1),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bocadillo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" override_env\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" override_env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APP_ENV"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testing"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])])])},[],!1,null,null,null);e.default=r.exports}}]);