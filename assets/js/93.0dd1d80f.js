(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{438:function(t,e,a){"use strict";a.r(e);var r=a(6),s=Object(r.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"heroku-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#heroku-deployment","aria-hidden":"true"}},[t._v("#")]),t._v(" Heroku deployment")]),t._v(" "),a("p",[t._v("In this guide, we will be looking at how to deploy a Bocadillo application to Heroku.\nYou can find the example code in the "),a("a",{attrs:{href:"https://github.com/bocadilloproject/heroku-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("heroku-example"),a("OutboundLink")],1),t._v(" repo.")]),t._v(" "),a("h2",{attrs:{id:"setting-things-up"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setting-things-up","aria-hidden":"true"}},[t._v("#")]),t._v(" Setting things up")]),t._v(" "),a("h3",{attrs:{id:"bocadillo-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bocadillo-application","aria-hidden":"true"}},[t._v("#")]),t._v(" Bocadillo application")]),t._v(" "),a("p",[t._v("Let's assume you have the following "),a("code",[t._v("app.py")]),t._v(" script:")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" bocadillo "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App\n\napp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n@app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, from Heroku!"')]),t._v("\n")])])]),a("h3",{attrs:{id:"procfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#procfile","aria-hidden":"true"}},[t._v("#")]),t._v(" Procfile")]),t._v(" "),a("p",[t._v("The "),a("a",{attrs:{href:"https://devcenter.heroku.com/articles/procfile",target:"_blank",rel:"noopener noreferrer"}},[t._v("Procfile"),a("OutboundLink")],1),t._v(" is a text file located in the root directory of your project which explicitly declares what command should be executed to start your app.")]),t._v(" "),a("p",[t._v("As described in "),a("router-link",{attrs:{to:"/discussions/deployment.html#running-with-gunicorn"}},[t._v("Deployment")]),t._v(", the following should fit most use cases:")],1),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("web: gunicorn -w 4 -k uvicorn.workers.UvicornWorker app:app\n")])])]),a("h3",{attrs:{id:"requirements-txt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements-txt","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("requirements.txt")])]),t._v(" "),a("p",[t._v("Heroku recognizes a Python app by the existence of "),a("code",[t._v("requirements.txt")]),t._v(" file in the root directory (see "),a("a",{attrs:{href:"https://devcenter.heroku.com/articles/python-pip",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python Dependencies via Pip"),a("OutboundLink")],1),t._v("). Here's an example of what yours may look like:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("bocadillo\ngunicorn\n")])])]),a("h3",{attrs:{id:"runtime-txt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runtime-txt","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("code",[t._v("runtime.txt")])]),t._v(" "),a("p",[t._v("Place this file in the root directory with a specific Python version. "),a("a",{attrs:{href:"https://devcenter.heroku.com/articles/python-runtimes",target:"_blank",rel:"noopener noreferrer"}},[t._v("Heroku will look at it"),a("OutboundLink")],1),t._v(" to determine which Python version to use.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("python-3.6.8\n")])])]),a("h2",{attrs:{id:"deploying-via-the-heroku-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-via-the-heroku-cli","aria-hidden":"true"}},[t._v("#")]),t._v(" Deploying via the Heroku CLI")]),t._v(" "),a("ol",[a("li",[t._v("Log into the "),a("a",{attrs:{href:"https://devcenter.heroku.com/articles/heroku-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("Heroku CLI"),a("OutboundLink")],1),t._v(" (you may need to install it on your machine):")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("heroku login\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Create the application on Heroku, e.g.:")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("heroku create my-bocadillo-app\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("Add the app's git remote:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("heroku git:remote -a my-bocadillo-app\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("Commit the changes, if any:")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m ‚ÄúReady to deploy to Heroku‚Äù\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("Deploy!")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push heroku master\n")])])]),a("p",[t._v("Once this is done, you can visit the newly deployed application using "),a("code",[t._v("$ heroku open")]),t._v(".")]),t._v(" "),a("p",[t._v("Congrats! You've just deployed a Bocadillo application to Heroku. üöÄ")])])},[],!1,null,null,null);e.default=s.exports}}]);